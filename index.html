<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#6C5CE7">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>–ó–∞–º—ä–∫—ä—Ç –Ω–∞ –°–æ—Ñ–∏ –∏ –ö—Ä–∏—Å–∏</title>
  <link rel="manifest" href="manifest.json">
  <link rel="icon" href="icons/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/castle-theme.css">
</head>
<body>
  <!-- Loading Screen -->
  <div id="loading-screen" class="screen active">
    <div class="loading">üë∏ –ó–∞—Ä–µ–∂–¥–∞–Ω–µ... üë¶</div>
  </div>

  <!-- Welcome Screen ‚Äî Tile Menu -->
  <div id="welcome-screen" class="screen">
    <!-- Decorative clouds -->
    <div class="castle-clouds">
      <span class="cloud">&#9729;</span>
      <span class="cloud">&#9729;</span>
      <span class="cloud">&#9729;</span>
    </div>

    <!-- Sticker Book Button -->
    <div class="welcome-top-section">
      <button class="sticker-album-btn" onclick="showStickers()">
        <span class="sticker-album-icon">üìí</span>
        <span class="sticker-album-badge" id="sticker-count-badge">0</span>
      </button>
    </div>

    <!-- Header: Characters + Title -->
    <div class="castle-header">
      <div class="castle-character sofi" id="char-sofi">
        <span class="char-emoji">üë∏</span>
      </div>
      <h1 class="welcome-title castle-title">–ó–∞–º—ä–∫—ä—Ç –Ω–∞<span class="castle-title-sub">–°–æ—Ñ–∏ –∏ –ö—Ä–∏—Å–∏</span></h1>
      <div class="castle-character krisi" id="char-krisi">
        <span class="char-emoji">üë¶</span>
      </div>
    </div>

    <!-- Tab Toggle: Games / Lessons -->
    <div class="menu-tabs">
      <button class="menu-tab active" id="tab-games" onclick="switchMenuTab('games')">–ò–≥—Ä–∏</button>
      <button class="menu-tab" id="tab-lessons" onclick="switchMenuTab('lessons')">–£—Ä–æ—Ü–∏</button>
    </div>

    <!-- Games Grid -->
    <div class="game-menu" id="games-menu">
      <button class="game-link" onclick="startRandomPhonicsGame()">
        <div class="game-link-icon phonics">üîä</div>
        <div class="game-link-text">
          <span class="game-link-title">–ó–≤—É–∫–æ–≤ –º–∞—á</span>
        </div>
      </button>
      <button class="game-link" onclick="showVocabGame()">
        <div class="game-link-icon vocab">üñºÔ∏è</div>
        <div class="game-link-text">
          <span class="game-link-title">–ù–∞–º–µ—Ä–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞</span>
        </div>
      </button>
      <button class="game-link" onclick="showBubbleGame()">
        <div class="game-link-icon bubble-game">üéà</div>
        <div class="game-link-text">
          <span class="game-link-title">–°–ø—É–∫–∞–π –±–∞–ª–æ–Ω–∞</span>
        </div>
      </button>
      <button class="game-link" onclick="showTrainGame()">
        <div class="game-link-icon train">üöÇ</div>
        <div class="game-link-text">
          <span class="game-link-title">–ó–≤—É–∫–æ–≤ –≤–ª–∞–∫</span>
        </div>
      </button>
      <button class="game-link" onclick="showBuildWordGame()">
        <div class="game-link-icon build">üî†</div>
        <div class="game-link-text">
          <span class="game-link-title">–°—ä–±–µ—Ä–∏ –¥—É–º–∞—Ç–∞</span>
        </div>
      </button>
      <button class="game-link" onclick="showPuzzleGame()">
        <div class="game-link-icon puzzle">üß©</div>
        <div class="game-link-text">
          <span class="game-link-title">–°—Ä–∏—á–∫–∏ –ø—ä–∑–µ–ª</span>
        </div>
      </button>
    </div>

    <!-- Lessons Grid -->
    <div class="game-menu hidden" id="lessons-menu">
      <button class="game-link" onclick="showLessonSelect()">
        <div class="game-link-icon letters-lesson">üî§</div>
        <div class="game-link-text">
          <span class="game-link-title">–ë—É–∫–≤–∏—Ç–µ</span>
          <span class="game-link-desc">–ù–∞—É—á–∏ –≤—Å—è–∫–∞ –±—É–∫–≤–∞</span>
        </div>
      </button>
      <button class="game-link" onclick="showSyllableLessonSelect()">
        <div class="game-link-icon syllables-lesson">üß©</div>
        <div class="game-link-text">
          <span class="game-link-title">–°—Ä–∏—á–∫–∏—Ç–µ</span>
          <span class="game-link-desc">–°–≥–ª–æ–±–∏ –∑–≤—É—Ü–∏—Ç–µ</span>
        </div>
      </button>
    </div>
  </div>

  <!-- Letter Lessons Selection Screen -->
  <div id="lesson-select-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <h1 class="welcome-title">–ù–∞—É—á–∏ –±—É–∫–≤–∏—Ç–µ</h1>
    <div class="stages-container" id="stages-container">
      <!-- Stages will be rendered dynamically -->
    </div>
  </div>

  <!-- Letter Lesson Screen -->
  <div id="lesson-screen" class="screen">
    <button class="castle-home-btn" onclick="showLessonSelect()">üè†</button>
    <div class="lesson-container">
      <div class="lesson-phase-indicator" id="lesson-phase">
        <span class="phase-dot active"></span>
        <span class="phase-dot"></span>
        <span class="phase-dot"></span>
      </div>
      <div class="lesson-letter-display" id="lesson-letter-display"></div>
      <div class="lesson-content" id="lesson-content">
        <!-- Content populated by LetterLesson.js -->
      </div>
    </div>
  </div>

  <!-- Syllable Lessons Selection Screen -->
  <div id="syllable-select-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <h1 class="welcome-title">–ù–∞—É—á–∏ —Å—Ä–∏—á–∫–∏—Ç–µ</h1>
    <div class="stages-container" id="syllable-stages-container">
      <!-- Syllable stages will be rendered dynamically -->
    </div>
  </div>

  <!-- Syllable Lesson Screen -->
  <div id="syllable-lesson-screen" class="screen">
    <button class="castle-home-btn" onclick="showSyllableLessonSelect()">üè†</button>
    <div class="lesson-container">
      <div class="lesson-phase-indicator" id="syllable-lesson-phase">
        <span class="phase-dot active"></span>
        <span class="phase-dot"></span>
        <span class="phase-dot"></span>
      </div>
      <div class="syllable-lesson-display" id="syllable-lesson-display"></div>
      <div class="lesson-content" id="syllable-lesson-content">
        <!-- Content populated by SyllableLesson.js -->
      </div>
    </div>
  </div>

  <!-- Settings Screen -->
  <div id="settings-screen" class="screen">
    <button class="castle-home-btn" onclick="goBackFromSettings()">üè†</button>
    <h1 class="welcome-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
    <div class="settings-container">
      <!-- Display Group -->
      <div class="settings-group">
        <div class="settings-group-header">–ü–æ–∫–∞–∑–≤–∞–Ω–µ</div>
        <div class="setting-item">
          <div>
            <div class="setting-label">–ü–æ–∫–∞–∂–∏ –¥—É–º–∏—Ç–µ</div>
            <div class="setting-sublabel">–ü–æ–∫–∞–∑–≤–∞ –∏–º–µ—Ç–æ –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞</div>
          </div>
          <div class="toggle" id="toggle-labels" onclick="toggleSetting('showLabels')"></div>
        </div>
        <div class="setting-preview">
          <div class="preview-card">
            <div class="preview-emoji">üê±</div>
            <div class="preview-label" id="preview-label">–∫–æ—Ç–∫–∞</div>
          </div>
        </div>
      </div>

      <!-- Gameplay Group -->
      <div class="settings-group">
        <div class="settings-group-header">–ò–≥—Ä–∞</div>
        <div class="setting-item">
          <div>
            <div class="setting-label">–ë—Ä–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏</div>
            <div class="setting-sublabel">–ö–æ–ª–∫–æ –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Å–∞ –ø–æ–∫–∞–∑–∞–Ω–∏?</div>
          </div>
          <div class="number-selector">
            <button class="number-option" data-value="2" onclick="setDistractors(2)">2</button>
            <button class="number-option" data-value="4" onclick="setDistractors(4)">4</button>
            <button class="number-option" data-value="6" onclick="setDistractors(6)">6</button>
          </div>
        </div>
        <div class="setting-item">
          <div>
            <div class="setting-label">–ù–∏–≤–æ –Ω–∞ —Ç—Ä—É–¥–Ω–æ—Å—Ç</div>
            <div class="setting-sublabel" id="difficulty-description">–ù–∞–π-–ª–µ—Å–Ω–∏: –ê, –û, –£, –ú, –°, –ù</div>
          </div>
          <div class="number-selector">
            <button class="number-option difficulty-option" data-value="1" onclick="setDifficulty(1)">1</button>
            <button class="number-option difficulty-option" data-value="2" onclick="setDifficulty(2)">2</button>
            <button class="number-option difficulty-option" data-value="3" onclick="setDifficulty(3)">3</button>
            <button class="number-option difficulty-option" data-value="4" onclick="setDifficulty(4)">4</button>
          </div>
        </div>
      </div>

      <!-- Reset Button -->
      <button class="reset-btn" onclick="resetSettings()">–í—ä—Ä–Ω–∏ –ø—ä—Ä–≤–æ–Ω–∞—á–∞–ª–Ω–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </div>
  </div>

  <!-- Letter Selection Screen -->
  <div id="letter-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <button class="settings-btn" onclick="showSettings()">
      <svg viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/></svg>
    </button>
    <h1 class="welcome-title">–ò–∑–±–µ—Ä–∏ –±—É–∫–≤–∞</h1>
    <div class="letter-grid" id="letter-grid"></div>
  </div>

  <!-- Game Screen -->
  <div id="game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="sound-display" id="current-letter"></div>
      <button class="speaker-btn" onclick="playInstruction()">
        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
      </button>
      <div class="pictures-grid" id="pictures-grid"></div>
      <div class="round-indicator" id="round-indicator"></div>
    </div>
  </div>

  <!-- Results Screen -->
  <div id="results-screen" class="screen">
    <div class="results-container">
      <div class="results-character sofi" id="phonics-results-char">
        <span class="char-emoji">üë∏</span>
      </div>
      <div class="results-letter" id="results-letter"></div>
      <div class="stars-display" id="stars-display"></div>
      <div class="results-message" id="phonics-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" id="results-continue-btn" onclick="startRandomPhonicsGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Vocabulary Game Screen -->
  <div id="vocab-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="vocab-word-display" id="vocab-word-display"></div>
      <button class="speaker-btn vocab-speaker" onclick="playVocabWord()">
        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
      </button>
      <div class="pictures-grid" id="vocab-pictures-grid"></div>
      <div class="round-indicator" id="vocab-round-indicator"></div>
    </div>
  </div>

  <!-- Vocabulary Results Screen -->
  <div id="vocab-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character sofi">
        <span class="char-emoji">üë∏</span>
      </div>
      <div class="vocab-results-title">–ù–∞–º–µ—Ä–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ç–∞</div>
      <div class="stars-display" id="vocab-stars-display"></div>
      <div class="results-message" id="vocab-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showVocabGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Bubble Pop Game Screen -->
  <div id="bubble-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="bubble-target">
        –ù–∞–º–µ—Ä–∏ –±—É–∫–≤–∞—Ç–∞
        <span class="bubble-target-letter" id="bubble-target-letter">–ê</span>
      </div>
      <div class="bubble-score">
        <div class="bubble-score-item">–í–µ—Ä–Ω–∏: <span id="bubble-correct">0</span></div>
        <div class="bubble-score-item">–ì—Ä–µ—à–∫–∏: <span id="bubble-wrong">0</span></div>
      </div>
      <div class="bubble-game-container" id="bubble-container"></div>
      <div class="round-indicator" id="bubble-round-indicator"></div>
    </div>
  </div>

  <!-- Bubble Pop Results Screen -->
  <div id="bubble-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character krisi">
        <span class="char-emoji">üë¶</span>
      </div>
      <div class="vocab-results-title">–°–ø—É–∫–∞–π –±–∞–ª–æ–Ω–∞</div>
      <div class="stars-display" id="bubble-stars-display"></div>
      <div class="results-message" id="bubble-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showBubbleGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Drag & Drop Game Screen -->
  <div id="dragdrop-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="dragdrop-instruction">–°–≤—ä—Ä–∂–∏ –≥–æ–ª—è–º–∞—Ç–∞ —Å –º–∞–ª–∫–∞—Ç–∞ –±—É–∫–≤–∞</div>
      <div class="dragdrop-container">
        <div class="dragdrop-section">
          <div class="dragdrop-section-label">–ì–æ–ª–µ–º–∏ –±—É–∫–≤–∏</div>
          <div class="dragdrop-row" id="uppercase-row"></div>
        </div>
        <div class="dragdrop-divider"></div>
        <div class="dragdrop-section">
          <div class="dragdrop-section-label">–ú–∞–ª–∫–∏ –±—É–∫–≤–∏</div>
          <div class="dragdrop-row" id="lowercase-row"></div>
        </div>
      </div>
      <div class="round-indicator" id="dragdrop-round-indicator"></div>
    </div>
  </div>

  <!-- Drag & Drop Results Screen -->
  <div id="dragdrop-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character sofi">
        <span class="char-emoji">üë∏</span>
      </div>
      <div class="vocab-results-title">–°–≤—ä—Ä–∂–∏ –±—É–∫–≤–∏—Ç–µ</div>
      <div class="stars-display" id="dragdrop-stars-display"></div>
      <div class="results-message" id="dragdrop-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showDragDropGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Sticker Book Screen -->
  <div id="sticker-book-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <h1 class="welcome-title">–ú–æ–∏—Ç–µ —Å—Ç–∏–∫–µ—Ä–∏</h1>
    <div class="sticker-book-stats" id="sticker-stats"></div>
    <div class="sticker-book-container">
      <div class="sticker-category" id="sticker-category-progress">
        <div class="sticker-category-header">–ü—Ä–æ–≥—Ä–µ—Å</div>
        <div class="sticker-grid" id="sticker-grid-progress"></div>
      </div>
      <div class="sticker-category" id="sticker-category-mastery">
        <div class="sticker-category-header">–ú–∞–π—Å—Ç–æ—Ä—Å—Ç–≤–æ</div>
        <div class="sticker-grid" id="sticker-grid-mastery"></div>
      </div>
      <div class="sticker-category" id="sticker-category-vocab">
        <div class="sticker-category-header">–†–µ—á–Ω–∏–∫</div>
        <div class="sticker-grid" id="sticker-grid-vocab"></div>
      </div>
      <div class="sticker-category" id="sticker-category-special">
        <div class="sticker-category-header">–°–ø–µ—Ü–∏–∞–ª–Ω–∏</div>
        <div class="sticker-grid" id="sticker-grid-special"></div>
      </div>
      <div class="sticker-category" id="sticker-category-bonus">
        <div class="sticker-category-header">–ë–æ–Ω—É—Å</div>
        <div class="sticker-grid" id="sticker-grid-bonus"></div>
      </div>
    </div>
  </div>

  <!-- Sound Train Game Screen -->
  <div id="train-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="train-instruction">–ü–æ—Å—Ç—Ä–æ–π –¥—É–º–∞—Ç–∞ –æ—Ç —Å—Ä–∏—á–∫–∏!</div>
      <div class="train-target-word" id="train-target-word" onclick="speakTrainWord()">üîä –º–∞-–º–∞</div>
      <button class="speaker-btn" onclick="speakTrainWord()">
        <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
      </button>
      <div class="train-track" id="train-track"></div>
      <div class="syllable-cards" id="syllable-cards"></div>
      <div class="round-indicator" id="train-round-indicator"></div>
    </div>
  </div>

  <!-- Sound Train Results Screen -->
  <div id="train-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character krisi">
        <span class="char-emoji">üë¶</span>
      </div>
      <div class="vocab-results-title">–ó–≤—É–∫–æ–≤ –≤–ª–∞–∫</div>
      <div class="stars-display" id="train-stars-display"></div>
      <div class="results-message" id="train-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showTrainGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Build the Word Game Screen -->
  <div id="build-word-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="build-word-container">
        <div class="build-word-image" id="build-word-image" onclick="speakBuildWord()">üçé</div>
        <button class="speaker-btn" onclick="speakBuildWord()">
          <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        </button>
        <div class="build-word-slots" id="build-word-slots"></div>
        <div class="letter-choices" id="letter-choices"></div>
        <div class="round-indicator" id="build-word-round-indicator"></div>
      </div>
    </div>
  </div>

  <!-- Build the Word Results Screen -->
  <div id="build-word-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character krisi">
        <span class="char-emoji">üë¶</span>
      </div>
      <div class="vocab-results-title">–°—ä–±–µ—Ä–∏ –¥—É–º–∞—Ç–∞</div>
      <div class="stars-display" id="build-word-stars-display"></div>
      <div class="results-message" id="build-word-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showBuildWordGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Vowels vs Consonants Game Screen -->
  <div id="sorting-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="sorting-game-container">
        <div class="sorting-instruction">–ì–ª–∞—Å–Ω–∞ –∏–ª–∏ —Å—ä–≥–ª–∞—Å–Ω–∞?</div>
        <div class="sorting-progress">
          <span id="sorting-progress-text">1 / 10</span>
        </div>
        <div class="sorting-current-letter" id="sorting-current-letter">–ê</div>
        <div class="sorting-choices">
          <button class="sorting-choice vowel-choice" onclick="answerSorting('vowel')">
            <span class="choice-emoji">üî¥</span>
            <span class="choice-label">–ì–ª–∞—Å–Ω–∞</span>
          </button>
          <button class="sorting-choice consonant-choice" onclick="answerSorting('consonant')">
            <span class="choice-emoji">üîµ</span>
            <span class="choice-label">–°—ä–≥–ª–∞—Å–Ω–∞</span>
          </button>
        </div>
        <div class="sorting-score-mini">
          <span>‚úì <span id="sorting-correct">0</span></span>
          <span>‚úó <span id="sorting-wrong">0</span></span>
        </div>
      </div>
    </div>
  </div>

  <!-- Vowels vs Consonants Results Screen -->
  <div id="sorting-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character sofi">
        <span class="char-emoji">üë∏</span>
      </div>
      <div class="vocab-results-title">–ì–ª–∞—Å–Ω–∏ –∏ —Å—ä–≥–ª–∞—Å–Ω–∏</div>
      <div class="stars-display" id="sorting-stars-display"></div>
      <div class="results-message" id="sorting-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showSortingGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- Syllable Puzzle Game Screen -->
  <div id="puzzle-game-screen" class="screen">
    <button class="castle-home-btn" onclick="showWelcome()">üè†</button>
    <div class="game-container">
      <div class="puzzle-game-container">
        <div class="puzzle-instruction">–°–≤—ä—Ä–∂–∏ –ø–æ–ª–æ–≤–∏–Ω–∫–∏—Ç–µ –Ω–∞ –¥—É–º–∞—Ç–∞!</div>
        <div class="puzzle-target-image" id="puzzle-target-image" onclick="speakPuzzleWord()">üè†</div>
        <button class="speaker-btn" onclick="speakPuzzleWord()">
          <svg viewBox="0 0 24 24"><path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/></svg>
        </button>
        <div class="puzzle-word-display" id="puzzle-word-display"></div>
        <div class="puzzle-columns">
          <div class="puzzle-column">
            <div class="puzzle-column-label">–ù–∞—á–∞–ª–æ</div>
            <div id="puzzle-first-halves"></div>
          </div>
          <div class="puzzle-column">
            <div class="puzzle-column-label">–ö—Ä–∞–π</div>
            <div id="puzzle-second-halves"></div>
          </div>
        </div>
        <div class="round-indicator" id="puzzle-round-indicator"></div>
      </div>
    </div>
  </div>

  <!-- Syllable Puzzle Results Screen -->
  <div id="puzzle-results-screen" class="screen">
    <div class="results-container">
      <div class="results-character krisi">
        <span class="char-emoji">üë¶</span>
      </div>
      <div class="vocab-results-title">–°—Ä–∏—á–∫–∏ –ø—ä–∑–µ–ª</div>
      <div class="stars-display" id="puzzle-stars-display"></div>
      <div class="results-message" id="puzzle-results-msg"></div>
      <div class="results-actions">
        <button class="continue-btn" onclick="showPuzzleGame()">–û—â–µ!</button>
        <button class="results-home-btn" onclick="showWelcome()">üè†</button>
      </div>
    </div>
  </div>

  <!-- New Sticker Notification -->
  <div id="sticker-notification" class="sticker-notification hidden">
    <div class="sticker-notification-content">
      <div class="sticker-notification-title">–ù–æ–≤ —Å—Ç–∏–∫–µ—Ä!</div>
      <div class="sticker-notification-emoji" id="notification-emoji"></div>
      <div class="sticker-notification-name" id="notification-name"></div>
      <div class="sticker-notification-desc" id="notification-desc"></div>
      <button class="sticker-notification-btn" onclick="hideNewStickerNotification()">–°—É–ø–µ—Ä!</button>
    </div>
  </div>
  <!-- Core Modules -->
  <script src="js/core/utils.js"></script>
  <script src="js/core/audio.js"></script>
  <script src="js/core/ui.js"></script>
  <script src="js/core/storage.js"></script>
  <script src="js/core/characters.js"></script>

  <!-- Game System -->
  <script src="js/games/GameRegistry.js"></script>
  <script src="js/games/BaseGame.js"></script>

  <!-- Individual Games (self-register with GameRegistry) -->
  <script src="js/games/PhonicsGame.js"></script>
  <script src="js/games/VocabGame.js"></script>
  <script src="js/games/BubbleGame.js"></script>
  <script src="js/games/DragDropGame.js"></script>
  <script src="js/games/TrainGame.js"></script>
  <script src="js/games/BuildWordGame.js"></script>
  <script src="js/games/SortingGame.js"></script>
  <script src="js/games/PuzzleGame.js"></script>

  <!-- Lesson Modules -->
  <script src="js/lessons/lessonData.js"></script>
  <script src="js/lessons/LetterLesson.js"></script>
  <script src="js/lessons/syllableData.js"></script>
  <script src="js/lessons/SyllableLesson.js"></script>

  <!-- Main Application -->
  <script src="js/app.js"></script>

  <!-- Service Worker Registration -->
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js')
        .then(reg => console.log('SW registered:', reg.scope))
        .catch(err => console.log('SW registration failed:', err));
    }
  </script>
</body>
</html>
